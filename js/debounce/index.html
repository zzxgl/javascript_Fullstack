<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
      #container {
        width: 100%;
        height: 200px;
        line-height: 200px;
        text-align: center;
        border: 1px solid #000;
      }
    </style>
</head>
<body>
  <div id="container"></div>
  <div id="buyItNow">BUYITNOW!</div>
  <script>
    const container = document.getElementById('container')
    let count = 0
    let timeout
    // 延时器到事件触发之间 有另一个延时器执行 将前一个延时器清除 动作只会执行一次
    function getUser (e) {
      clearTimeout(timeout)
      timeout = setTimeout(()=>{
        container.innerHTML = count ++
        console.log(count)
        console.log(e)
      },1000)
    }
   
    container.onmousemove = getUser

    function buy(e)  {
      console.log(1234)
      console.log(e)
    }
    const buyit = document.getElementById('buyItNow')
    // debounce里面执行buy 
    buyit.onclick = debounce(buy)

    // 高阶函数 输入是函数 输出也是函数
    // HOF
    function debounce(func) {
      let timeout
    //    onclick nomousemove 调用的是 return 后面的function(){...}
      return function(e) {
        clearTimeout(timeout)
        timeout = setTimeout(() => {
          func(e) 
        }, 1000);
        // console.log(e)
      }
    }
  </script>  
</body>
</html>